---
title: "Development"
date: "2021-01-12"
section: "development"
pullQuote: "Learn how to get started developing and hacking on Grouparoo."
---

First, ðŸŽ‰THANK YOUðŸŽ‰.

Grouparoo relies on the contributions of many people just like you to create the best marketing infrastructure & automation tools. Thank you for taking the time to join this open source community, and create something we can all use! By contributing to Grouparoo, you agree to our [Community Guidelines](/docs/community) and [Code of Conduct](/docs/community/code-of-conduct)

## Getting Started

When developing Grouparoo, you'll be running code within the `monorepo`. This git repository is the Grouparoo Monorepo, and contains a number of related bu separate projects. There are `Apps`, `CLI`, `Core`, `Plugins`, along with a number of tools and utilities. We use [`pnpm`](https://pnpm.js.org) to install packages to allow us to run and test all of these packages together without needing to publish them to NPM. We use [`lerna`](https://github.com/lerna/lerna) to publish packages.

- **Apps**: These are example applications like a Grouparoo customer would run - they require `@grouparoo/core` and any number of plugins and may have toggled certain settings
- **Core**: The `@grouparoo/core` project is the main part of any Grouparoo application and includes the API (both web and workers), along with the Grouparoo administration website
- **CLI**: The Grouparoo CLI tool, ie: `npx grouparoo generate`
- **Plugins**: There are opt-in add-ons for Grouparoo customers, and contain the logic to connect to new sources & destinations, or otherwise add new functionality to Grouparoo.

### Running the Monorepo (OSX):

```bash
# Install NVM to manage node versions
# From: https://github.com/nvm-sh/nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash

# Install the homebrew package manager
# From: https://brew.sh/
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Install node.js v12
nvm install v12

# Depending on your shell (bash, zsh, etc) you may need to ensure that nvm is loaded into your environment via .bashrc, .bash_profile, etc
# On OSX/ZSH, we recommend installing Oh My ZSH (https://github.com/ohmyzsh/ohmyzsh) and enabling the nvm plugin

# Install & run postgresql (v9.x)
brew install postgresql
brew services start postgresql

# Install & run Redis
brew install redis
brew services start redis

# Clone this repository
git clone git@github.com:grouparoo/grouparoo.git
cd grouparoo

# Install dependencies
pnpm install

# Configure your local environment variables in .env to be able to run the "staging-public" app
cp apps/staging-public/.env.example apps/staging-public/.env
open apps/staging-public/.env

# Create your local development database (Postgres)
createdb "grouparoo_development"

# or in `psql`
CREATE DATABASE grouparoo_development;
GRANT ALL PRIVILEGES ON DATABASE grouparoo_development TO postgres;

# Run the staging-public app example project
cd apps/staging-public # If you aren't already here
npm run dev
```

### Running the Monorepo (Windows):

```bash
#TODO
```

### Running the Monorepo (Linux):

```bash
# Install NVM to manage node versions
To download the nvm installation script from the projectâ€™s GitHub page, you can use curl. Note that the version number may differ from what is highlighted here:

curl -sL https://raw.githubusercontent.com/creationix/nvm/v0.35.3/install.sh -o install_nvm.sh

Inspect the installation script with nano:

nano install_nvm.sh

Run the script with bash:

bash install_nvm.sh

# Install node.js v12
nvm install v12

# Install & run postgresql (v9.x)
sudo apt update
sudo apt install postgresql postgresql-contrib

# Install & run Redis
sudo apt update
sudo apt install redis-server

# Open this file with your preferred text editor:
sudo nano /etc/redis/redis.conf

# comment the line:
supervised no

# add the following line bellow the commented line:
supervised systemd

# alternatively, you can use the redis official Docker image:
sudo docker run --name my-redis-container -d redis

# Clone this repository
git clone git@github.com:grouparoo/grouparoo.git
cd grouparoo

# Install dependencies with pnpm (If you don't have pnpm, install it via "npm i -g pnpm")
pnpm install

# Configure your local environment variables in .env to be able to run the "staging-public" app
cp apps/staging-public/.env.example apps/staging-public/.env
open apps/staging-public/.env

# Create your local development database (Postgres)
createdb "grouparoo_development"

# or in `psql`
CREATE DATABASE grouparoo_development;
GRANT ALL PRIVILEGES ON DATABASE grouparoo_development TO postgres;

# Run the staging-public app example project
cd apps/staging-public # If you aren't already here
npm run dev
```

## Typescript

Grouparoo is written in [Typescript](https://www.typescriptlang.org/), which means that we need to compile our Typescript to Javascript before we can run it. This is true for Grouparoo plugins, but not necessarily true for Grouparoo Apps or Core, if you are using `npm run dev` (development mode), which will handle the compilation on the fly. Every sub-project in the Grouparoo Monorepo has an `npm run prepare` command which handles the compilation process. `npm run prepare` is also an [NPM lifecycle hook](https://docs.npmjs.com/misc/scripts#prepublish-and-prepare), which will automatically run after every `npm install` as well.

If you are developing a plugin, you will need to `npm run prepare` it before seeing your changes. In many cases, the `prepare` step only calls out to `tsc`, and in these cases, you may be able to `tsc --watch` to automatically source changes and rebuild your plugin.

Grouparoo self-documents its Typescript interface to [docs.grouparoo.com](https://docs.grouparoo.com) via [Typedoc](https://typedoc.org/). The docs from the `master` branch are automatically published to this site. If you want to read the docs for an older version of Grouparoo or a different branch, you can generate the docs locally by running `cd core && npm run docs` in this repository.

## Dependencies

Grouparoo is built on top of many wonderful open source technologies. An exhaustive list of our dependencies can be found within our [package.json](https://github.com/grouparoo/grouparoo/blob/master/core/package.json) files. This below list provides links to the core packages we rely on.

Grouparoo Core:
- General
  - [pnpm](https://pnpm.js.org)
  - [Lerna](https://github.com/lerna/lerna)
  - [Jest](https://jestjs.io/)
- API
  - [Actionhero](https://www.actionherojs.com/)
  - [Sequelzie-Typescript](https://github.com/RobinBuschmann/sequelize-typescript)
  - [Sequelzie](https://sequelize.org/)
  - [Node Resque](https://github.com/actionhero/node-resque)
- Web
  - [Next.js](https://nextjs.org/)
  - [React](https://reactjs.org/)
  - [React-Bootstrap](https://react-bootstrap.github.io/)
  - [fontawesome](https://fontawesome.com/)

All dependencies Grouparoo uses must be licensed under a non-viral open-source licence that allows for commercial use. We audit every dependency in every sub-project of this monorepo via [license-checker](https://www.npmjs.com/package/license-checker). The list of licenses we accept can be found [here](https://github.com/grouparoo/grouparoo/blob/master/tools/license-checker/check).

## Testing

You will need `chromedriver` installed to run the automated browser tests:

- OSX: `brew cask install chromedriver`
- Windows: TODO
- Linux: TODO

```shell
# Create and populate test databases
./core/api/bin/create-test-databases
npm test # I will also run the build and lint commands
```

Running `npm test` from the top-level of this monorepo will run the `npm test` command in every sub-package of the monorepo via pnpm. You can also test an individual package by entering that directory and running `npm test`.

Jest will automatically test the latest version of your typescript files, and you do not need to compile your code to test. However, the test suite should test the compile step as well. We usually run `npm run prepare` as a `pretest` NPM hook.

A note on chromedriver for OSX Users: As Chrome updates, you may need to `brew cask reinstall chromedriver` to keep up to date as well. Every time you update chromedriver, you will need to re-authorize the application to run in system preferences, as it is unsigned.

## Deploying the Example Server

On your servers:

1. Ensure you have the proper environment variables set
2. Run `pnpm install` at the root of this project, which will run the build steps too
3. Run `cd apps/staging-public && npm run start`

See the [`Procfile`](https://github.com/grouparoo/grouparoo/blob/master/Procfile) for an example of how to run a web and worker process independently.
If you are deploying to Heroku or a similar PaaS, they might prune node_modules that aren't explicitly in "dependencies". However, due to the way lerna works, this might delete all of your modules. Check with your provider for how to disable this (ex: https://devcenter.heroku.com/articles/nodejs-support#build-behavior)
