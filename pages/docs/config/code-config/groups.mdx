---
title: "Groups (Code Config)"
date: "2021-02-11"
pullQuote: "Learn how to configure Groups using Grouparoo's CLI tool."
breadcrumb_label: Groups
---

Once you have an App, Source, and Properties ([start with an App](/docs/running/ui-enterprise/apps) if you don't have any), then you're ready to define your Groups.

Groups are where the magic happens in Grouparoo. (It's in the name, after all!) Groups are a segment or cohort of Records. They are useful in that you can use Groups to target a specific set of users to [export to some Destination](/docs/running/ui-enterprise/destinations). You can have _Calculated Groups_ and _Manual Groups_. [See here](/docs/getting-started/product-concepts) to learn more about the core concepts in Grouparoo.

## Generating a Calculated Group

To generate a new Calculated Group for your Grouparoo application, run [the `generate` command](/docs/cli/config#generate).

    grouparoo generate group:calculated all_emails

Note here that `new_high_value_customers` is the ID for the Group. An ID is always required when generating a config object.

This command will generate a file in your application directory at `config/groups/new_high_value_customers.js` that looks something like this:

```js
exports.default = async function buildConfig() {
  return [
    {
      class: "group",
      id: "new_high_value_customers",
      name: "New High Value Customers",
      type: "calculated",
      rules: [],
    },
  ];
};
```

which you can customize with rules such as:

```js
exports.default = async function buildConfig() {
  return [
    {
      class: "group",
      id: "recent_high_value_customers",
      name: "Recent High Value Customers",
      type: "calculated",
      rules: [
        {
          propertyId: "email",
          operation: { op: "exists" },
        },
        {
          propertyId: "email",
          operation: { op: "notILike" },
          match: "%grouparoo.com",
        },
        {
          propertyId: "last_purchase_date",
          operation: { op: "relative_gt" },
          relativeMatch: "15",
          relativeMatchUnit: "days",
        },
        {
          propertyId: "ltv",
          operation: { op: "gt" },
          match: "3000",
        },
        {
          propertyId: "subscribed",
          operation: { op: "eq" },
          match: "true",
        },
      ],
    },
  ];
};
```

This Group would contain records with an email address that is not `@grouparoo.com` that have made a purchase in the last 15 days, have a lifetime value over $3000, and are subscribed to our newsletter.

More info this below.

## Configuring Your Calculated Group

Configuring a Calculated Group is all about adding Rules to the Group. A Rule is some logical operator to Filter Properties. A Record must match every Rule to be included in the Group.

Available operations depends on both the _type_ of Property and the underlying Grouparoo database (SQLite vs. Postgres). See below for a list of rules. (If in doubt, choose Postgres.)

Note you can use SQL wildcard characters (%, \_, [ ], ^, -) in your Group rule match values as appropriate and necessary.

<RuleOpsTable />

Add your list of Rules to the `rules` array in the generated config file. You may also change any of the other default values, as necessary.

## Adding Manual Groups

While a great deal of the value of Grouparoo comes from our Calculated Groups, Manual Groups are still valuable in certain circumstances. Manual Groups are Groups of records where you manually add or remove Records from the Group.

To generate a new Manual Group for your Grouparoo application, run [the `generate` command](/docs/cli/config#generate).

    grouparoo generate group:manual my_custom_group

Note here that `my_custom_group` is the ID for the Group. An ID is always required when generating a config object.

This command will generate a file in your application directory at `config/groups/my_custom_group.js`. You can change the `name` and `id` properties in this file.

<ValidateAndApplyConfig />
